\doxysection{sqldatabase.\+h}
\hypertarget{sqldatabase_8h_source}{}\label{sqldatabase_8h_source}\index{include/database/sqldatabase.h@{include/database/sqldatabase.h}}
\mbox{\hyperlink{sqldatabase_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#ifndef\ SQLDATABASE\_H}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#define\ SQLDATABASE\_H}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#ifndef\ SQLITE\_HAS\_CODEC}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#define\ SQLITE\_HAS\_CODEC}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#include\ <filesystem>}}
\DoxyCodeLine{00031\ \textcolor{preprocessor}{\#include\ <functional>}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#include\ <mutex>}}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00035\ \textcolor{preprocessor}{\#include\ <unordered\_map>}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#ifdef\ \_WIN32}}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#include\ <sqlcipher/sqlite3.h>}}
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00039\ \textcolor{preprocessor}{\#include\ "{}sqlite3.h"{}}}
\DoxyCodeLine{00040\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{sqlcontext_8h}{sqlcontext.h}}"{}}}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{sqlstatement_8h}{sqlstatement.h}}"{}}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \textcolor{keyword}{namespace\ }Nickvision::Database}
\DoxyCodeLine{00045\ \{}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keyword}{using\ }SqliteCustomFunction\ =\ std::function<void(SqlContext\&)>;}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_nickvision_1_1_database_1_1_sql_database}{SqlDatabase}}}
\DoxyCodeLine{00052\ \ \ \ \ \{}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_nickvision_1_1_database_1_1_sql_database_a18f42878c9292f8d8bbeb2edc45e8bca}{SqlDatabase}}(\textcolor{keyword}{const}\ std::filesystem::path\&\ path,\ \textcolor{keywordtype}{int}\ flags);}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_nickvision_1_1_database_1_1_sql_database_a7a1bcb9653a74d09f53f5af237e8d2fc}{SqlDatabase}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_nickvision_1_1_database_1_1_sql_database}{SqlDatabase}}\&\ database);}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_nickvision_1_1_database_1_1_sql_database_a497a8d094b2288f5200f7d8e71092fcc}{SqlDatabase}}(\mbox{\hyperlink{class_nickvision_1_1_database_1_1_sql_database}{SqlDatabase}}\&\&\ database)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::filesystem::path\&\ \mbox{\hyperlink{class_nickvision_1_1_database_1_1_sql_database_a2fc935d862d367d6a17598ee641b0d16}{getPath}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_nickvision_1_1_database_1_1_sql_database_ab7ca7bd43149ad2b9d9d1b7f70a79a99}{isEncrypted}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ sqlite3*\ \mbox{\hyperlink{class_nickvision_1_1_database_1_1_sql_database_ae9cc49eb27d6b69cacdc4bd1035ad450}{c\_obj}}();}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_nickvision_1_1_database_1_1_sql_database_a97d715f07e3790bf35c872b7d3709ffd}{unlock}}(\textcolor{keyword}{const}\ std::string\&\ password);}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_nickvision_1_1_database_1_1_sql_database_aa9eb0996e6092630fbe4e279966f7166}{changePassword}}(\textcolor{keyword}{const}\ std::string\&\ password);}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_nickvision_1_1_database_1_1_sql_database_a39c0d5b28e50ae7aa600970d7ebc225d}{exec}}(\textcolor{keyword}{const}\ std::string\&\ command);}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_nickvision_1_1_database_1_1_sql_statement}{SqlStatement}}\ \mbox{\hyperlink{class_nickvision_1_1_database_1_1_sql_database_a439e4d98a36c6c1847df76fe7e4718a1}{createStatement}}(\textcolor{keyword}{const}\ std::string\&\ command);}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_nickvision_1_1_database_1_1_sql_database_ad4a37cf719b75ee11415750c1114d255}{registerFunction}}(\textcolor{keyword}{const}\ std::string\&\ name,\ \textcolor{keyword}{const}\ SqliteCustomFunction\&\ func,\ \textcolor{keywordtype}{int}\ expectedArgs\ =\ -\/1);}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_nickvision_1_1_database_1_1_sql_database}{SqlDatabase}}\&\ \mbox{\hyperlink{class_nickvision_1_1_database_1_1_sql_database_a2af897206dab66bbc71427c598dcfc6c}{operator=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_nickvision_1_1_database_1_1_sql_database}{SqlDatabase}}\&\ database);}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_nickvision_1_1_database_1_1_sql_database}{SqlDatabase}}\&\ \mbox{\hyperlink{class_nickvision_1_1_database_1_1_sql_database_a189c3b649e0d1677d247c9d4c9e8a6a6}{operator=}}(\mbox{\hyperlink{class_nickvision_1_1_database_1_1_sql_database}{SqlDatabase}}\&\&\ database)\ \textcolor{keyword}{noexcept};}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \textcolor{keyword}{operator}\ bool()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \textcolor{keyword}{mutable}\ std::mutex\ m\_mutex;}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ std::filesystem::path\ m\_path;}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ m\_flags;}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ m\_isEncrypted;}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ std::shared\_ptr<sqlite3>\ m\_database;}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ m\_isUnlocked;}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ std::unordered\_map<std::string,\ SqliteCustomFunction>\ m\_custom;}
\DoxyCodeLine{00151\ \ \ \ \ \};}
\DoxyCodeLine{00152\ \}}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//SQLDATABASE\_H}}

\end{DoxyCode}
